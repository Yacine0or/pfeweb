<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/Attendance.css">
    <link rel="stylesheet" href="../css/side-panel.css">
    <link rel="stylesheet" href="../css/profEmp.css">
    <link rel="stylesheet" href="../css/sendnotification.css">
</head>
<body>
    <div class="card">
        <div class="side-panel">
        <h2>Teacher UMBB</h2>
            <ul role="tablist" class="nav flex-column nav-tabs" id="myTab">
                <li class="d-none">
                    <a href="#profile" id="profile-tab" data-bs-toggle="tab" class="nav-link active">Profile</a>
                </li>
                <li>
                    <a href="#Timetable" id="Timetable-tab" data-bs-toggle="tab" class="nav-link">Timetable</a>
                </li>
                <li>
                    <a href="#attendance" id="attendance-tab" data-bs-toggle="tab" class="nav-link">Attendance</a>
                </li>
                <li>
                    <a href="#send-notification" id="send-notification-tab" data-bs-toggle="tab" class="nav-link">Send Notification</a>
                </li>
                <li>
                    <a href="#receive-notification" id="receive-notification-tab" data-bs-toggle="tab" class="nav-link">Receive Notification</a>
                </li>
                <li>
                    <a href="#" id="logout-link" class="nav-link">Logout</a>
                </li>
            </ul>
        </div>
        <div class="content">
            <div class="card-body tab-content">
                <div class="tab-pane fade show active" id="profile" role="tabpanel">
                    <h1>Profile</h1>
                    <hr>
                </div>
                <div class="tab-pane fade" id="Timetable" role="tabpanel">
                    <h1>Timetable</h1>
                    <hr>
                    <div class="content">
                        <div class="calendar">
                            <div class="today" id="todayLabel">Today</div>
                            <div class="date" id="dateLabel"></div>
                            <div class="days" id="daysContainer"></div>
                        </div>
                        <div class="schedule">
                            <form id="courseForm">
                                <label for="timeC">Time:</label>
                                <select id="timeC" name="timeC">
                                    <option value="08:00 - 09:30">08:00-09:30</option>
                                    <option value="09:40 - 11:10">09:40-11:10</option>
                                    <option value="11:20 - 12:50">11:20-12:50</option>
                                    <option value="13:00 - 14:30">13:00-14:30</option>
                                    <option value="14:40 - 16:10">14:40-16:10</option>
                                    <option value="16:20 - 17:50">16:20-17:50</option>
                                </select>
                    
                                <label for="courseName">Course Name:</label>
                                <input type="text" id="courseName" name="courseName" class="courseName" required>
                    
                                <label for="courseType">Type:</label>
                                <select id="courseType" name="courseType" class="courseType">
                                    <option value="Cour">Cour</option>
                                    <option value="TD">TD</option>
                                    <option value="TP">TP</option>
                                </select>
                    
                                <label for="courseBranch">Branch:</label>
                                <input type="text" id="courseBranch" name="courseBranch" class="courseBranch">
                    
                                <label for="courseGroup">Group:</label>
                                <input type="text" id="courseGroup" name="courseGroup" class="courseGroup">
                    
                                <label for="courseRoom">Room:</label>
                                <input type="text" id="courseRoom" name="courseRoom" class="courseRoom">
                                <input type="hidden" id="daySelected" name="daySelected">
                                <button type="submit" class="add-course-button">Add Course</button>
                            </form>
                    
                            <!-- Display existing courses here -->
                            <h3 id="scheduleHeading"></h3>
                            <div id="scheduleContainer"></div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="attendance" role="tabpanel">
                    <h1>Attendance</h1>
                    <hr>
                    <main class="content">
                        <section class="group-selection">
                            <h2>Select a Group</h2>
                            <div class="group-buttons">
                            </div>
                        </section>
                <section>
                    <h2>Seances</h2>
        <table id="seances-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Branch</th>
                    <th>Group</th>
                    <th>Room</th>
                </tr>
            </thead>
            <tbody id="seances-body">
                <!-- Seances data will be populated here -->
            </tbody>
        </table>
                </section>
                        <section class="attendance-section hidden">
                            
                            <h2>Attendance</h2>
                            <table id="attendance-table">
                                <thead>
                                    <tr>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Matricule</th>
                                    </tr>
                                </thead>
                                <tbody id="attendance-body">
                                    <!-- Attendance data will be populated here -->
                                </tbody>
                            </table>
                        </section>
                
                        <section class="absence-section hidden">
                            <h2>Absence</h2>
                            <table id="absence-table">
                                <thead>
                                    <tr>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Matricule</th>
                                        <th>Justification</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="absence-body">
                                    <!-- Absence data will be populated here -->
                                </tbody>
                            </table>
                        </section>
                        <section class="print-section hidden">
                            <button class="btn" onclick="printGroupData()">Print Group Data</button>
                        </section>
                    </main>
                </div>
                <div class="tab-pane fade" id="send-notification" role="tabpanel">
                    <h1>Send Notification</h1>
                    <hr>
                    <div class="content">
                        <p>Use the form below to send a notification to administrations or students.</p>
                    
                        <!-- Notification Form -->
                        <form id="notification-form-teacher" class="notification-form">
                            <label for="recipient">Recipient:</label>
                            <select id="recipient" name="recipient">
                                <option value="students">Students</option>
                                <option value="admin">Administration</option>
                                <option value="both">Both</option>
                            </select>
                    
                            <label for="message">Message:</label>
                            <textarea id="message" name="message" rows="5" placeholder="Type your message here..." required></textarea>
                    
                            <button type="submit" class="btn">Send Notification</button>
                        </form>
                    
                        <!-- Display Sent Notifications -->
                        <div class="sent-notifications" id="sent-notifications-teacher">
                            <h3>Sent Notifications</h3>
                            <p>No notifications sent yet.</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="receive-notification" role="tabpanel">
                    <h1>Teacher Notifications</h1>
                    <hr>
                    <div class="content">
                          <p>Below are the notifications from administration and students.</p>
                  
                          <!-- List of notifications -->
                          <div class="notification-list" id="notification-list-teacher">
                              <!-- Notifications will be added here by JavaScript -->
                              <p>No notifications yet.</p>
                          </div>
                      </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>

    <script>
         $(document).ready(function () {
            var activeTab = sessionStorage.getItem('activeTab');
            if (activeTab) {
                var tab = new bootstrap.Tab(document.querySelector('a[href="' + activeTab + '"]'));
                tab.show();
            } else {
                var firstTab = new bootstrap.Tab(document.querySelector('#myTab a:first-child'));
                firstTab.show();
            }

            $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                var href = $(e.target).attr('href');
                sessionStorage.setItem('activeTab', href);
            });

            $('#logout-link').on('click', function (e) {
                e.preventDefault(); 
                sessionStorage.removeItem('activeTab');

                window.location.href = '../teacher.html';
            });
        });
    </script>
    
    <script src="../js/sendnotification.js" type="module"></script>
    <script src="../js/Attendance.js" type="module"></script>
    <script src="../js/printGroupData.js"></script>
    
    <script src="../js/profEmp.js" type="module"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>
